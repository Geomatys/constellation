<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:c="http://java.sun.com/jstl/core"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:mf="http://mapfaces.org/taglib">

    <h:outputText value="#{bean.i18n['newinstance']}" />
    <span/>
    <h:inputText value="#{bean.newServiceName}" />
    <span/>
    <h:commandButton action="#{bean.createInstance}" value="#{bean.i18n['add']}" />
    <br/>
    <br/>

    <table width="100%">
        <colgroup>
            <col width="16px"/>
            <col />
            <col />
            <col width="28px"/>
            <col width="16px"/>
            <col width="16px"/>
            <col width="16px"/>
            <col width="32px"/>
        </colgroup>
        <tbody>
            <a4j:repeat value="#{bean.instances}" var="instance">
                <tr>
                    <td><h:graphicImage value="#{instance.statusIcon}" style="border:none;"/></td>
                    <td>#{instance.name}</td>
                    <td>
                        <a href="#{instance.path}" target="blank">#{instance.path}</a>
                    </td>
                    <td style="text-align:left;">
                        <a4j:commandLink action="#{instance.config}" reRender="dialogContent" oncomplete="dlg4.show();">
                            <h:graphicImage value="org.constellation.menu.provider.edit.png.mfRes" style="border:none;"/>
                        </a4j:commandLink>
                    </td>
                    <td>
                        <h:commandLink action="#{instance.restart}">
                            <h:graphicImage value="org.constellation.menu.provider.reload.png.mfRes" style="border:none;"/>
                        </h:commandLink>
                    </td>
                    <td>
                        <h:commandLink action="#{instance.stop}">
                            <h:graphicImage value="org.constellation.menu.service.stop.png.mfRes" style="border:none;"/>
                        </h:commandLink>
                    </td>
                    <td>
                        <h:commandLink action="#{instance.start}">
                            <h:graphicImage value="org.constellation.menu.service.start.png.mfRes" style="border:none;"/>
                        </h:commandLink>
                    </td>
                    <td style="text-align:right;">
                        <h:commandLink action="#{instance.delete}">
                            <h:graphicImage value="org.constellation.menu.provider.remove.png.mfRes" style="border:none;"/>
                        </h:commandLink>
                    </td>
                </tr>
            </a4j:repeat>
        </tbody>
    </table>


    <mf:dialog  id="dlg4" header="Preview" widgetVar="dlg4" modal="true"
                showEffect="fade" hideEffect="fade">
        <a4j:support id="dialog4_Ajax" event=""/>

        <mf:Div id="dialogContent">
            <ui:include src="#{bean.configPage}"/>
        </mf:Div>

    </mf:dialog>

</ui:composition>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:mf="http://mapfaces.org/taglib">

    <h:outputText value="#{bean.i18n['newsource']}" />
    <span/>
    <h:inputText value="#{bean.newSourceName}" />
    <span/>
    <h:commandButton action="#{bean.createSource}" value="#{bean.i18n['add']}" />
    <br/>
    <br/>

    <mf:Outline id="storePreview" rootVisible="false" value="#{bean.layerModel}" var="node" width="100%">

        <mf:DataTableColumn>
            <mf:switch>
                <mf:case condition="#{mf:isInstance(node,'org.constellation.menu.provider.AbstractDataStoreServiceBean$DataStoreSourceNode')}" fallthrought="false">
                    <h:outputText value="#{node.userObject.id}"/>
                </mf:case>
                <mf:case condition="#{mf:isInstance(node,'org.constellation.menu.provider.AbstractDataStoreServiceBean$TypeNode')}" fallthrought="false">
                    <h:outputText value="#{node.userObject.localPart}"/>
                </mf:case>
            </mf:switch>
        </mf:DataTableColumn>

        <mf:DataTableColumn width="48px">
            <mf:switch>
                <mf:case condition="#{mf:isInstance(node,'org.constellation.menu.provider.AbstractDataStoreServiceBean$DataStoreSourceNode')}" fallthrought="false">

                    <a4j:commandLink action="#{node.config}">
                        <h:graphicImage value="org.constellation.menu.provider.edit.png.mfRes" style="border:none;"/>
                    </a4j:commandLink>
                    <a4j:commandLink action="#{node.reload}" reRender="storePreview">
                        <h:graphicImage value="org.constellation.menu.provider.reload.png.mfRes" style="border:none;"/>
                    </a4j:commandLink>
                </mf:case>

                <mf:case condition="#{mf:isInstance(node,'org.constellation.menu.provider.AbstractDataStoreServiceBean$TypeNode')}" fallthrought="false">

                    <mf:switch>
                        <mf:case condition="#{!node.exist}" fallthrought="false">
                            <h:outputLink>
                                <h:graphicImage value="org.constellation.menu.provider.smallred.png.mfRes" style="border:none;"/>
                            </h:outputLink>
                        </mf:case>
                        <mf:case condition="#{!node.visible}" fallthrought="false">
                            <h:outputLink>
                                <h:graphicImage value="org.constellation.menu.provider.smallgray.png.mfRes" style="border:none;"/>
                            </h:outputLink>
                            <h:outputLink>
                                <h:graphicImage value="org.constellation.menu.provider.view.png.mfRes" style="border:none;"/>
                            </h:outputLink>
                        </mf:case>
                        <mf:case condition="#{node.visible}" fallthrought="false">
                            <h:outputLink>
                                <h:graphicImage value="org.constellation.menu.provider.smallgreen.png.mfRes" style="border:none;"/>
                            </h:outputLink>
                            <h:outputLink>
                                <h:graphicImage value="org.constellation.menu.provider.view.png.mfRes" style="border:none;"/>
                            </h:outputLink>
                        </mf:case>
                    </mf:switch>

                </mf:case>
            </mf:switch>
        </mf:DataTableColumn>

        <mf:DataTableColumn width="24px">

            <mf:switch>
                <mf:case condition="#{mf:isInstance(node,'org.constellation.menu.provider.AbstractDataStoreServiceBean$DataStoreSourceNode')}" fallthrought="false">
                    <a4j:commandLink action="#{node.delete}" reRender="storePreview">
                        <h:graphicImage value="org.constellation.menu.provider.remove.png.mfRes" style="border:none;"/>
                    </a4j:commandLink>
                </mf:case>                
            </mf:switch>
        </mf:DataTableColumn>

    </mf:Outline>

</ui:composition>


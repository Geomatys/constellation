<a id="brand" href="#">
    <img src="img/constellation-menu.svg"/>
</a>
<ul class="nav navbar-right nav-pills ng-cloak nav-user pull-right">
    <li class="dropdown pointer" >
        <a class="dropdown-toggle" data-toggle="dropdown">
            <span>
                <span class="glyphicon glyphicon-user"></span>
                <span class="hidden-tablet" >{{firstname}} {{lastname}}</span>
                <span class="fa fa-caret-down"></span>
            </span>
        </a>
        <ul class="dropdown-menu">
            <li>
                <a ng-class="navClass('profile')" href="#/profile">
                    <span class="glyphicon glyphicon-pencil"></span>
                    <span translate="global.menu.edit">Edit profile</span>
                </a>
            </li>
            <li>
                <a href="#" ng-click="logout()">
                    <span class="glyphicon glyphicon-log-out"></span>&nbsp;
                    <span translate="global.menu.admin.logout">Log out</span>
                </a>
            </li>
        </ul>
    </li>
</ul>

<div id="navigation" class="ng-cloak">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
    <div class="collapse navbar-right navbar-collapse">
        <ul class="nav nav-pills" ng-hide="authenticated">
            <li style="margin-left:2px;" class="dropdown pointer" ng-controller="LanguageController">
                <a class="dropdown-toggle" data-toggle="dropdown">
                    <span>
                        <span class="glyphicon glyphicon-flag"></span>&nbsp;
                        <span class="hidden-tablet" translate="global.menu.language">Language</span>
                        <b class="caret"></b>
                    </span>
                </a>
                <ul class="dropdown-menu pull-right">
                    <li active-menu="en">
                        <a ng-click="changeLanguage('en')">
                            <span class="famfamfam-flag-gb"></span>&nbsp;
                            <span translate="global.language.en">English</span>
                        </a>
                    </li>
                    <li active-menu="fr">
                        <a ng-click="changeLanguage('fr')">
                            <span class="famfamfam-flag-fr"></span>&nbsp;
                            <span translate="global.language.fr">French</span>
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
        <ul class="nav nav-pills" ng-controller="navCtrl">
            <li class="hidden-sm hidden-md">
                <a ng-class="navClass('webservice')" href="#/webservice" id="webserviceLink">
                    <span class="glyphicon glyphicon-cloud"></span>
                    <span translate="global.menu.web-service">Services web</span>
                </a>
            </li>
            <li class="hidden-xs hidden-lg">
                <a ng-class="navClass('webservice')" href="#/webservice">
                    <span class="glyphicon glyphicon-cloud"></span>
                    <span translate="global.menu.web-service.min">Services web</span>
                </a>
            </li>
            <li>
                <a ng-class="navClass('data')" href="#/data" id="dataLink">
                    <span class="glyphicon glyphicon-file"></span>
                    <span translate="global.menu.data">Data</span>
                </a>
            </li>
            <li class="hidden-sm" ng-repeat="page in navigationArray">
                <a ng-class="navClass(page.cssClass)" href="{{page.href}}" id="{{page.id}}">
                    <span class="{{page.iconClass}}"></span>
                    <span translate="{{page.labelKey}}">{{page.defaultLabel}}</span>
                </a>
            </li>
            <li ng-class="{'hidden-sm':navigationArray.length>1}">
                <a ng-class="navClass('sensors')" href="#/sensors" id="sensorLink">
                    <span ng-class="navClass('sensors')" class="icon-menu-sensor"></span>
                    <span translate="global.menu.sensor">Sensor</span>
                </a>
            </li>
            <li ng-class="{'hidden-sm':navigationArray.length>0,'hidden-md':navigationArray.length>0}">
                <a ng-class="navClass('styles')" href="#/styles" id="stylesLink">
                    <span class="fa fa-paint-brush"></span>
                    <span translate="global.menu.style">Styles</span>
                </a>
            </li>
            <li class="hidden-sm hidden-md">
                <a ng-class="navClass('mapcontext')" href="#/mapcontext" id="mapcontextLink">
                    <span ng-class="navClass('mapcontext')" class="icon-menu-mapcontext"></span>
                    <span translate="global.menu.mapcontext">Map context</span>
                </a>
            </li>
            <li ng-if="!hasRole('cstl-admin')" class="hidden-sm">
                <a ng-class="navClass('tasks')" href="#/tasks" id="task">
                    <span class="glyphicon glyphicon-cog"></span>
                    <span translate="global.menu.tasks">Tasks</span>
                </a>
            </li>
            <li ng-if="hasRole('cstl-admin')" class="hidden-sm hidden-md">
                <a ng-class="navClass('tasks')" href="#/tasks" id="taskAdmin">
                    <span class="glyphicon glyphicon-cog"></span>
                    <span translate="global.menu.tasks">Tasks</span>
                </a>
            </li>
            <li class="hidden-sm hidden-md" ng-if="hasRole('cstl-admin')">
                <a ng-class="navClass('admin')" href="#/admin" id="admin">
                    <span ng-class="navClass('admin')" class="glyphicon glyphicon-wrench"></span>
                    <span translate="global.menu.admin.main">Administration</span>
                </a>
            </li>

            <li class="dropdown pointer hidden-lg hidden-md hidden-xs">
                <a class="dropdown-toggle" data-toggle="dropdown">
                    <span>
                        <span class="glyphicon glyphicon-plus"></span>
                        <span class="hidden-tablet" translate="global.menu.other">Other</span>
                        <b class="caret"></b>
                    </span>
                </a>
                <ul class="dropdown-menu menu-other">
                    <li ng-repeat="page in navigationArray">
                        <a ng-class="navClass(page.cssClass)" href="{{page.href}}">
                            <span class="{{page.iconClass}}"></span>
                            <span translate="{{page.labelKey}}">{{page.defaultLabel}}</span>
                        </a>
                    </li>
                    <li ng-if="navigationArray.length>1">
                        <a ng-class="navClass('sensors')" href="#/sensors">
                            <span ng-class="navClass('sensors')" class="icon-menu-sensor" style="width:12px; height:12px; color:transparent;">aa</span>
                            <span ng-class="navClass('sensors')" class="icon-menu-sensor"></span>
                            <span translate="global.menu.sensor">Sensor</span>
                        </a>
                    </li>
                    <li ng-if="navigationArray.length>0">
                        <a ng-class="navClass('styles')" href="#/styles">
                            <span class="fa fa-paint-brush"></span>
                            <span translate="global.menu.style">Styles</span>
                        </a>
                    </li>
                    <li>
                        <a ng-class="navClass('mapcontext')" href="#/mapcontext">
                            <span ng-class="navClass('mapcontext')" class="icon-menu-mapcontext" style="width:12px; height:12px; color:transparent;">aa</span>
                            <span ng-class="navClass('mapcontext')" class="icon-menu-mapcontext"></span>
                            <span translate="global.menu.mapcontext">Map context</span>
                        </a>
                    </li>
                    <li>
                        <a ng-class="navClass('tasks')" href="#/tasks">
                            <span class="glyphicon glyphicon-cog"></span>
                            <span translate="global.menu.tasks">Tasks</span>
                        </a>
                    </li>
                    <li ng-if="hasRole('cstl-admin')">
                        <a ng-class="navClass('admin')" href="#/admin">
                            <span ng-class="navClass('admin')" class="glyphicon glyphicon-wrench"></span>
                            <span translate="global.menu.admin.main">Administration</span>
                        </a>
                    </li>
                </ul>
            </li>

            <li ng-if="hasRole('cstl-admin')" class="dropdown pointer hidden-lg hidden-sm hidden-xs">
                <a class="dropdown-toggle" data-toggle="dropdown">
                    <span>
                        <span class="glyphicon glyphicon-plus"></span>
                        <span class="hidden-tablet" translate="global.menu.other">Other</span>
                        <b class="caret"></b>
                    </span>
                </a>
                <ul class="dropdown-menu menu-other">
                    <li ng-if="navigationArray.length>0">
                        <a ng-class="navClass('styles')" href="#/styles">
                            <span class="fa fa-paint-brush"></span>
                            <span translate="global.menu.style">Styles</span>
                        </a>
                    </li>
                    <li>
                        <a ng-class="navClass('mapcontext')" href="#/mapcontext">
                            <span ng-class="navClass('mapcontext')" class="icon-menu-mapcontext" style="width:12px; height:12px; color:transparent;">aa</span>
                            <span ng-class="navClass('mapcontext')" class="icon-menu-mapcontext"></span>
                            <span translate="global.menu.mapcontext">Map context</span>
                        </a>
                    </li>
                    <li>
                        <a ng-class="navClass('tasks')" href="#/tasks">
                            <span class="glyphicon glyphicon-cog"></span>
                            <span translate="global.menu.tasks">Tasks</span>
                        </a>
                    </li>
                    <li ng-if="hasRole('cstl-admin')">
                        <a ng-class="navClass('admin')" href="#/admin">
                            <span ng-class="navClass('admin')" class="glyphicon glyphicon-wrench"></span>
                            <span translate="global.menu.admin.main">Administration</span>
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
</div>

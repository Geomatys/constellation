<div class="logo-wrapper row" style="margin-bottom: 5px;">
    <div class="col-md-9">
        <h3 class="header-title" translate="page.header.title.data">Data Dashboard</h3>
    </div>
    <div class="col-md-3">
        <div class="dropdown pull-right">
            <a data-toggle="dropdown" class="btn btn-add btn-lg dropdown-toggle" style="margin-top:8px;padding:15px 19px;">
                <span class="fa fa-plus" style="margin-right:5px;"></span>
                <span translate="label.add.data">Add data</span>
                <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
                <li><a id="uploadchoice"
                       ng-click="showLocalFilePopup()"
                       translate="label.file.local">Local file</a></li>
                <li><a id="filesystemchoice"
                       ng-click="showServerFilePopup()"
                       translate="label.file.server">Server file</a></li>
                <li><a ng-click="showDatabasePopup()"
                       translate="label.file.db">Database</a></li>
            </ul>
        </div>
    </div>
</div>
<!--
<ul class="nav nav-tabs">
    <li id="dataTab" class="active tab-data" style="margin-left: 10px;">
        <a ng-click="selectTab('tabdata')" data-toggle="tab">
            <span translate="data.dashboard.tab.data">Data</span>
        </a>
    </li>
    <li id="descriptionTab" class="tab-metadata">
        <a ng-click="selectTab('tabmetadata')" data-toggle="tab">
            <span translate="data.dashboard.tab.metadata">Metadata</span>
        </a>
    </li>
</ul>
-->
<div class="tab-content" ng-if="currentTab==='tabdata'">
    <div class="tab-pane" ng-class="{active:currentTab==='tabdata'}" style="padding-top:0;">
        <div id="dataDashboard" class="row" ng-init="init(); published=null; observation=null">
            <div class="col-sm-12">
            <div class="frame dashboard">
                <div class="navbar navbar-default" style="margin-bottom: 0px;">
                    <div class="navbar-header">
                        <a class="navbar-brand" translate="data.information.title">Available data</a>
                    </div>
                    <div class="collapse navbar-collapse">
                        <ul class="nav navbar-nav navbar-right">
                            <li ng-class="{active:wrap.filtertype == ''}" ng-click="wrap.filtertype = ''">
                                <a translate="label.all">All</a>
                            </li>
                            <li ng-class="{active:wrap.filtertype=='VECTOR'}" ng-click="wrap.filtertype='VECTOR'">
                                <a translate="label.vector">Vector</a>
                            </li>
                            <li ng-class="{active:wrap.filtertype=='COVERAGE'}" ng-click="wrap.filtertype='COVERAGE'">
                                <a translate="label.raster">Raster</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="navbar sort-navbar" ng-class="{'advanced-open':advancedSearch==true}">
                    <div class="navbar-inner">
                        <ul class="nav nav-style">
                            <li ng-click="wrap.ordertype='Name';wrap.orderreverse=!wrap.orderreverse">
                                <a>
                                    <span translate="label.title">Title</span>
                                    <i class="fa fa-caret-up"
                                       ng-if="wrap.ordertype === 'Name' && wrap.orderreverse"></i>
                                    <i class="fa fa-caret-down"
                                       ng-if="wrap.ordertype === 'Name' && !wrap.orderreverse"></i>
                                </a>
                            </li>
                            <li class="divider-vertical"></li>
                            <li ng-click="wrap.ordertype='Date';wrap.orderreverse=!wrap.orderreverse">
                                <a>
                                    <span translate="label.date">Date</span>
                                    <i class="fa fa-caret-up"
                                       ng-if="wrap.ordertype === 'Date' && wrap.orderreverse"></i>
                                    <i class="fa fa-caret-down"
                                       ng-if="wrap.ordertype === 'Date' && !wrap.orderreverse"></i>
                                </a>
                            </li>
                            <li class="divider-vertical"></li>
                            <li ng-click="wrap.ordertype='Owner';wrap.orderreverse=!wrap.orderreverse">
                                <a>
                                    <span translate="label.owner">Owner</span>
                                    <i class="fa fa-caret-up"
                                       ng-if="wrap.ordertype === 'Owner' && wrap.orderreverse"></i>
                                    <i class="fa fa-caret-down"
                                       ng-if="wrap.ordertype === 'Owner' && !wrap.orderreverse"></i>
                                </a>
                            </li>
                            <li class="divider-vertical"></li>
                            <li class="dropdown pointer">
                                <a class="dropdown-toggle" data-toggle="dropdown">
                                    <span>
                                        <span class="hidden-tablet"
                                              translate="label.published">Published</span>
                                        <b class="caret"></b>
                                    </span>
                                </a>
                                <ul class="dropdown-menu">
                                    <li>
                                        <a ng-class="{filter_active : published==null}"
                                           ng-click="init(); published=null; observation=null">
                                            <span translate="label.all">all</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a ng-class="{filter_active : published}"
                                           ng-click="showPublished(true); observation=null">
                                            <span translate="label.yes">Yes</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a ng-class="{filter_active : published==false}"
                                           ng-click="showPublished(false); observation=null">
                                            <span translate="label.no">No</span>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li class="divider-vertical"></li>
                            <li class="dropdown pointer">
                                <a class="dropdown-toggle" data-toggle="dropdown">
                                    <span>
                                        <span class="hidden-tablet" translate="label.observation">Observation</span>
                                        <b class="caret"></b>
                                    </span>
                                </a>
                                <ul class="dropdown-menu">
                                    <li>
                                        <a ng-class="{filter_active : observation==null}"
                                           ng-click="init(); observation=null; published=null">
                                            <span translate="label.all">all</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a ng-class="{filter_active : observation}"
                                           ng-click="showSensorable(true); published=null">
                                            <span translate="label.yes">Yes</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a ng-class="{filter_active : observation==false}"
                                           ng-click="showSensorable(false); published=null">
                                            <span translate="label.no">No</span>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li class="divider-vertical"></li>
                        </ul>
                        <button type="button"
                                ng-click="init(); published=null; observation=null"
                                title="{{'label.search.refresh' | translate }}"
                                class="btn btn-xs btn-info btn-data">
                            <i class="fa fa-times"></i>
                        </button>
                        <div class="pull-right quick-search-panel">
                            <button class="btn btn-sm pull-right btn-info btn-data pull-right"
                                    ng-click="toggleAdvancedSearch()"
                                    tooltip-html-unsafe="{{advancedSearch?'label.search.advanced.hide':'label.search.advanced.show' | translate }}"
                                    tooltip-placement="bottom"
                                    style="margin-top:5px;"
                                    ng-class="{'btn-small-selected':advancedSearch}">
                                <i class="fa" ng-class="{'fa-plus':!advancedSearch, 'fa-minus':advancedSearch}"></i>
                            </button>
                            <div class="col-sm-7 pull-right input-group"
                                 ng-show="!advancedSearch"
                                 style="padding-left: 5px;padding-right: 5px;">
                                <input type="text"
                                       class="searchbox search-query form-control form-control-fix"
                                       ng-model="searchTerm"/>
                                <span class="input-group-btn">
                                    <button class="btn btn-info btn-data"
                                            type="button"
                                            ng-click="callSearch();"
                                            title="{{'label.search' | translate}}"
                                            style="height: 30px;margin: 0;">
                                        <i class="glyphicon glyphicon-search" style="vertical-align: top;"></i>
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="dash-inner row" collapse="!advancedSearch">
                    <form name="searchForm" class="advanced-search-data">
                        <div class="row" style="padding-right: 15px; padding-left: 15px;">
                            <div class="col-sm-4" ng-class="{'has-error': searchForm.title.$invalid}">
                                <label class="control-label new-service-form-label"
                                       translate="data.search.filter.title">Title</label>
                                <input type="text"
                                       class="form-control"
                                       name="title"
                                       ng-model="search.title"
                                       ng-pattern="alphaPattern"
                                       ng-change="checkIsValid(searchForm.title.$invalid)"/>
                            </div>
                            <div class="col-sm-4" ng-class="{'has-error': searchForm.abstract.$invalid}">
                                <label class="control-label new-service-form-label"
                                       translate="data.search.filter.abstract">Abstract</label>
                                <input type="text"
                                       class="form-control"
                                       name="abstract"
                                       ng-model="search.abstract"
                                       ng-pattern="alphaPattern"
                                       ng-change="checkIsValid(searchForm.abstract.$invalid)"/>
                            </div>
                            <div class="col-sm-4" ng-class="{'has-error': searchForm.keywords.$invalid}">
                                <label class="control-label new-service-form-label"
                                       translate="data.search.filter.keywords">Keywords</label>
                                <input type="text"
                                       class="form-control"
                                       name="keywords"
                                       ng-model="search.keywords"
                                       ng-pattern="alphaPattern"
                                       ng-change="checkIsValid(searchForm.keywords.$invalid)"/>
                            </div>
                        </div>
                        <div class="form-group row" style="padding-right: 15px; padding-left: 15px;">
                            <div class="col-sm-4" ng-class="{'has-error': searchForm.topic.$invalid}">
                                <label class="control-label new-service-form-label"
                                       translate="data.search.filter.topic">Topic categories</label>
                                <input type="text"
                                       class="form-control"
                                       name="topic"
                                       ng-model="search.topic"
                                       ng-pattern="alphaPattern"
                                       ng-change="checkIsValid(searchForm.topic.$invalid)"/>
                            </div>
                            <div class="col-sm-4"  ng-class="{'has-error': searchForm.data.$invalid}">
                                <label class="control-label new-service-form-label"
                                       translate="data.search.filter.data">Variable</label>
                                <input type="text"
                                       class="form-control"
                                       name="data"
                                       ng-model="search.data"
                                       ng-pattern="alphaPattern"
                                       ng-change="checkIsValid(searchForm.data.$invalid)"/>
                            </div>
                            <div class="col-sm-4" ng-class="{'has-error': searchForm.level.$invalid}">
                                <label class="control-label new-service-form-label"
                                       translate="data.search.filter.level">Processing level</label>
                                <input type="text"
                                       class="form-control"
                                       name="level"
                                       ng-model="search.level"
                                       ng-pattern="alphaPattern"
                                       ng-change="checkIsValid(searchForm.level.$invalid)"/>
                            </div>
                        </div>
                        <div class="form-group row" style="padding-right: 15px; padding-left: 15px;">
                            <div class="col-sm-4" ng-class="{'has-error': searchForm.area.$invalid}">
                                <label class="control-label new-service-form-label"
                                       translate="data.search.filter.area">Area</label>
                                <input type="text"
                                       class="form-control"
                                       name="area"
                                       ng-model="search.area"
                                       ng-pattern="alphaPattern"
                                       ng-change="checkIsValid(searchForm.area.$invalid)"/>
                            </div>
                            <div class="pull-right"  style="padding-right: 15px; padding-left: 15px;">
                                <button type="button"
                                        class="btn btn-xs btn-info btn-data"
                                        style="padding: 4px; margin-top: 6px;"
                                        ng-click="callSearch()"
                                        translate="label.search">Search</button>
                                <button type="button"
                                        class="btn btn-xs btn-info btn-data"
                                        style="padding: 4px; margin-top: 6px;"
                                        ng-click="resetSearch()"
                                        translate="label.clear">Clear</button>
                            </div>
                         </div>
                    </form>
                </div>
                <div class="dash-inner row">
                    <div class="pull-left" style="width: 60%; margin-bottom: 5px;" ng-init="small=false">
                        <div id="list" data-role="list">
                            <div class="pagination-wrapper pagination-data">
                                <strong class="col-md-6">
                                    <span class="nb-results pull-left">{{wrap.countdata}}&nbsp;</span>
                                    <span class="nb-results" translate="label.count.data">available data</span>
                                </strong>

                                <div class="hidden-sm hidden-xs pull-right col-md-6" style="padding-right:0;">
                                    <button type="button"
                                            ng-click="small=true"
                                            class="pull-right btn btn-xs btn-info btn-data"
                                            ng-class="{'btn-small-selected':small==true}"
                                            style="border-radius:0 3px 3px 0; margin-top: 5px; width:32px; height:34px;">
                                        <img src="img/btn-display-reduced.svg" alt="" />
                                    </button>
                                    <button type="button"
                                            ng-click="small=false"
                                            class="pull-right btn btn-xs btn-info btn-data"
                                            ng-class="{'btn-small-selected':small==false}"
                                            style="margin-left: 10px; border-radius:3px 0 0 3px; margin-top: 5px; width:32px; height:34px;">
                                        <img src="img/btn-display-normal.svg" alt="" />
                                    </button>
                                    <p class="pull-right" style="margin-top:12px;" translate="label.display">Display :</p>
                                </div>

                                <div class="row">
                                    <div class="col-sm-9"
                                         style="padding-left:15px; margin-top: 5px;"
                                         page-switcher="{page:wrap.currentpage,size:wrap.nbbypage,count:wrap.countdata}"
                                         on-select-page="displayPage(page)"></div>
                                    <select class="nb-per-page input-small form-control pull-right col-xs-2 "
                                            style="padding-left: 5px;padding-right: 5px; margin-right: 15px; margin-top: 5px;"
                                            ng-model="wrap.nbbypage">
                                        <option value="5">5</option>
                                        <option value="10">10</option>
                                        <option value="20">20</option>
                                        <option value="50">50</option>
                                        <option value="100">100</option>
                                    </select>
                                </div>

                            </div>
                            <div class="item-list">
                                <div class="item {{data.Type | lowercase}}"
                                     ng-repeat="data in wrap.dataList"
                                     ng-class="{selected:data==selected, hide:(data.TargetService.length===0 && published==true) || (data.TargetService.length>0 && published==false) || (data.TargetSensor.length>0 && observation==false) || (data.TargetSensor.length===0 && observation==true), 'col-xs-6':small==true}"
                                     ng-click="select(data)">
                                    <div class="top">
                                        <span class="item-title"
                                              title="{{getDisplayName(data.Provider,data.Name)}}">{{truncate(small,getDisplayName(data.Provider,data.Name))}}</span>
                                        <span class="pull-right text-right item-list-style" >{{data.Type}}</span>
                                        <span ng-if="data.Type=='COVERAGE' && data.subtype=='multiDimentions'"
                                              class="pull-right coverage-type-nd item-list-style"
                                              style="color:#30718c;">nD </span>
                                        <img ng-if="data.Type=='VECTOR' && (data.Subtype=='Point' || data.Subtype=='MultiPoint') && data!=selected"
                                             src="img/vector-multipoint.svg"
                                             class="pull-right"
                                             style="margin-top:6px; margin-right:10px;" />
                                        <img ng-if="data.Type=='VECTOR' && data.Subtype=='Geometry' && data!=selected"
                                             src="img/vector-multigeometry.svg"
                                             class="pull-right"
                                             style="margin-top:6px; margin-right:10px; width:22px;" />
                                        <img ng-if="data.Type=='VECTOR' && (data.Subtype=='Polygon' || data.Subtype=='MultiPolygon') && data!=selected"
                                             src="img/vector-poly.svg"
                                             class="pull-right"
                                             style="margin-top:6px; margin-right:10px;" />
                                        <img ng-if="data.Type=='VECTOR' && (data.Subtype=='LineString' || data.Subtype=='MultiLineString') && data!=selected"
                                             src="img/vector-polyline.svg"
                                             class="pull-right"
                                             style="margin-top:6px; margin-right:10px;" />
                                        <img ng-if="data.Type=='VECTOR' && (data.Subtype=='Point' || data.Subtype=='MultiPoint') && data==selected"
                                             src="img/vector-multipoint-selected.svg"
                                             class="pull-right"
                                             style="margin-top:6px; margin-right:10px;" />
                                        <img ng-if="data.Type=='VECTOR' && data.Subtype=='Geometry' && data==selected"
                                             src="img/vector-multigeometry-selected.svg"
                                             class="pull-right"
                                             style="margin-top:6px; margin-right:10px; width:22px;" />
                                        <img ng-if="data.Type=='VECTOR' && (data.Subtype=='Polygon' || data.Subtype=='MultiPolygon') && data==selected"
                                             src="img/vector-poly-selected.svg"
                                             class="pull-right"
                                             style="margin-top:6px; margin-right:10px;" />
                                        <img ng-if="data.Type=='VECTOR' && (data.Subtype=='LineString' || data.Subtype=='MultiLineString') && data==selected"
                                             src="img/vector-polyline-selected.svg"
                                             class="pull-right"
                                             style="margin-top:6px; margin-right:10px;" />
                                    </div>
                                    <div class="bottom">
                                        <div class="block">
                                            <i class="fa fa-calendar"></i>{{data.Date | date:'yyyy-MM-dd'}}
                                        </div>
                                        <div class="block">
                                            <i class="fa fa-user"></i>{{data.Owner}}
                                        </div>
                                        <img ng-if="data.Sensorable===true && data.TargetSensor.length === 0"
                                             src="img/icon-sensor-non-active.svg"
                                             class="pull-right"
                                             style="margin-top:6px; margin-right:10px;" />
                                        <img ng-if="data.TargetSensor.length > 0"
                                             src="img/icon-sensor-active.svg"
                                             class="pull-right"
                                             style="margin-top:6px; margin-right:10px;" />
                                        <span ng-if="data.TargetSensor.length > 0"
                                              ng-class="{blanc:data==selected, hide:small==true}"
                                              class="pull-right text-right item-list-style"
                                              style="margin-right:10px; font-weight:bold;"
                                              translate="sensor.observation" >Sensor observation</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pull-left" style="width: 40%;">
                        <div id="selection">
                            <div class="alert alert-info alert-data" ng-class="{hide: selected != null}">
                                <h4 translate="label.no.selected.data">No selected data</h4>
                                <p translate="msg.no.selected.data"
                                   style="font-weight:normal;">Click on a data to display more information</p>
                            </div>
                            <div class="selected-item" id="selected-item" ng-class="{hide: selected == null}">
                                <div class="block-header" ng-click="toggleUpDownSelected()">
                                    <strong class="item-title title-bloc"
                                            title="{{selected.Name}}">{{truncateTitleBlock(selected.Name)}}</strong>
                                    <i class="fa fa-chevron-down pull-right"></i>
                                </div>

                                <div class="block-content" ng-class="{'block-vector':selected.Type=='VECTOR','block-raster':selected.Type=='COVERAGE'}">
                                    <div class="row description-block">
                                        <div class="col-sm-3 col-md-2"><img src="img/block-content-owner.svg" alt="" /></div>
                                        <div class="col-sm-9 col-md-10 description-text"><span>{{selected.Owner}}</span></div>
                                    </div>
                                    <div class="row description-block">
                                        <div class="col-sm-3 col-md-2"><img src="img/block-content-date.svg" alt="" /></div>
                                        <div class="col-sm-9 col-md-10 description-text"><span>{{selected.Date | date:'yyyy-MM-dd'}}</span></div>
                                    </div>
                                </div>
                                <div class="block-action">
                                    <div class="row">
                                        <div class="col-sm-2">
                                            <span class="tooltipicon">
                                                <button id="showData"
                                                        class="btn btn-success"
                                                        type="button"
                                                        ng-click="showData()"
                                                        tooltip-html-unsafe="{{'layer.listing.selected.data.button' | translate }}"
                                                        tooltip-placement="bottom">
                                                    <i class="fa fa-eye"></i>
                                                </button>
                                            </span>
                                        </div>
                                        <div class="col-sm-2">
                                           <span class="tooltipicon">
                                                <button type="button"
                                                        id="seeMetadata"
                                                        class="btn btn-warning"
                                                        ng-click="displayMetadata()"
                                                        tooltip-html-unsafe="{{'layer.listing.selected.metadata.button' | translate }}"
                                                        tooltip-placement="bottom">
                                                    <i class="glyphicon glyphicon-file"></i>
                                                </button>
                                           </span>
                                        </div>
                                        <div class="col-sm-2">
                                            <span class="tooltipicon">
                                                <a id="exportMD" class="btn btn-info "
                                                   ng-href="{{cstlUrl}}api/1/domain/{{domainId}}/data/export/{{selected.Provider}}/{{selected.Name}};jsessionid={{cstlSessionId}}"
                                                   tooltip-placement="bottom"
                                                   tooltip-html-unsafe="{{'layer.listing.selected.export.button' | translate }}">
                                                        <i class="fa fa-download"></i>
                                                </a>
                                            </span>
                                        </div>
                                        <div class="col-sm-2">
                                            <span class="tooltipicon">
                                                <button id="showDomain"
                                                        class="btn"
                                                        type="button"
                                                        ng-click="showDomains()"
                                                        tooltip-placement="bottom"
                                                        tooltip-html-unsafe="{{'layer.listing.selected.domain.button' | translate }}">
                                                    <i class="fa fa-link"></i>
                                                </button>
                                            </span>
                                        </div>
                                        <div class="col-sm-2">
                                            <span class="tooltipicon">
                                                <button type="button"
                                                        id="deleteLayer"
                                                        class="btn btn-danger"
                                                        ng-click="deleteData();"
                                                        tooltip-placement="bottom"
                                                        tooltip-html-unsafe="{{'layer.listing.selected.delete.button' | translate }}">
                                                    <i class="glyphicon glyphicon-trash"></i>
                                                </button>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class=" row block-association"
                                     ng-init="assocStyle=false; assocService=false; assocSensor=false">
                                    <div class="col-sm-4"
                                         ng-click="assocStyle=!assocStyle; assocService=false; assocSensor=false">
                                        <div ng-class="{'selected':assocStyle==true}"
                                             class="block-associated block-associated-style">
                                            <div class="block-associated-title"
                                                 translate="label.related.style">Associated Styles</div>
                                            <div>{{selected.TargetStyle.length}}</div>
                                        </div>
                                    </div>
                                    <div class="col-sm-4"
                                         ng-click="assocStyle=false; assocService=!assocService; assocSensor=false">
                                        <div ng-class="{'selected':assocService==true}"
                                             class="block-associated block-associated-services">
                                            <div class="block-associated-title"
                                                 translate="label.related.service">Associated Styles</div>
                                            <div>{{selected.TargetService.length}}</div>
                                        </div>
                                    </div>
                                    <div class="col-sm-4"
                                         ng-click="assocStyle=false; assocService=false; assocSensor=!assocSensor">
                                        <div ng-class="{'selected':assocSensor==true}"
                                             class="block-associated block-associated-sensor">
                                            <div class="block-associated-title"
                                                 translate="label.related.sensors">Associated Styles</div>
                                            <div>{{selected.TargetSensor.length}}</div>
                                        </div>
                                    </div>
                                </div>
                                <div ng-if="assocStyle==true" style="margin-top:15px;">
                                    <div class="block-header block-assoc-style">
                                        <strong>
                                            <span translate="label.related.style">Related style(s)</span>
                                        </strong>
                                    </div>
                                    <div id="linkedList" class="block-content" >
                                        <span ng-show="selected.TargetStyle.length == 0"
                                              translate="label.no.association">No association</span>
                                        <div ng-show="selected.TargetStyle.length > 0"
                                             class="style"
                                             ng-repeat="style in selected.TargetStyle"
                                             style="margin-bottom:5px;">
                                            <button type="button"
                                                    ng-click="unlinkStyle(style.Provider, style.Name, selected.Provider, selected.Name);"
                                                    class="btn btn-small">
                                                <i class="glyphicon glyphicon-trash"></i>
                                            </button>
                                            <button type="button"
                                                    ng-click="editLinkedStyle(style.Provider, style.Name, selected);"
                                                    class="btn btn-small">
                                                <i class="glyphicon glyphicon-pencil"></i>
                                            </button>
                                            {{truncateTitleBlock(style.Name)}}
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <button type="button"
                                                        ng-click="showStyleList();"
                                                        class="btn btn-sm pull-right">
                                                    <i class="glyphicon glyphicon-plus"></i>
                                                    <span style="margin-left:5px;"
                                                          translate="label.new.style">Add new style</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div ng-if="assocService==true" style="margin-top:15px;">
                                    <div class="block-header block-assoc-services">
                                        <strong>
                                            <strong translate="label.related.service">Related service(s)</strong>
                                        </strong>
                                    </div>
                                    <div id="linkedServiceList" class="block-content" >
                                        <span ng-show="selected.TargetService.length == 0"
                                              translate="label.no.association">No association</span>
                                        <div ng-show="selected.TargetService.length > 0"
                                             class="style"
                                             ng-repeat="service in selected.TargetService"
                                             style="line-height:30px;">
                                            {{truncateTitleBlock(service.name)}}
                                        </div>
                                    </div>
                                </div>
                                <div ng-if="assocSensor==true" style="margin-top:15px;">
                                    <div class="block-header block-assoc-sensor">
                                        <strong>
                                            <span translate="label.related.sensors">Related sensor(s)</span>
                                        </strong>
                                    </div>
                                    <div id="linkedSensorList" class="block-content" >
                                        <span ng-show="selected.TargetSensor.length === 0"
                                              translate="label.no.association">No association</span>
                                        <div ng-show="selected.TargetSensor.length > 0"
                                             class="style"
                                             ng-repeat="sensorId in selected.TargetSensor"
                                             style="margin-bottom:5px;">
                                            <button type="button" ng-click="unlinkSensor(sensorId)"
                                                    class="btn btn-small">
                                                <i class="glyphicon glyphicon-trash"></i>
                                            </button>
                                            {{truncateTitleBlock(sensorId)}}
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <button type="button"
                                                        ng-show="selected.TargetSensor.length === 0"
                                                        ng-click="showSensorsList();"
                                                        class="btn btn-sm pull-right">
                                                    <i class="glyphicon glyphicon-plus"></i>
                                                    <span style="margin-left:5px;"
                                                          translate="label.new.sensor">Add new sensor</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Modal -->
                                <div id="viewerData"
                                     class="modal fade"
                                     tabindex="-1"
                                     role="dialog"
                                     aria-labelledby="myModalLabel"
                                     aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-resp-height">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button"
                                                        class="close"
                                                        data-dismiss="modal"
                                                        aria-hidden="true">×</button>
                                                <h4 class="modal-title"
                                                    translate="layer.listing.modal.dataviewer">Data Viewer</h4>
                                            </div>
                                            <div class="modal-body">
                                                <div id="dataMap" style="height: 400px; width:740px"></div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button"
                                                        class="btn btn-default"
                                                        data-dismiss="modal"
                                                        aria-hidden="true">Close</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </div>
    </div>
</div>

<div class="tab-content" ng-if="currentTab==='tabmetadata'">
    <div class="tab-pane" ng-class="{active:currentTab==='tabmetadata'}" style="padding-top:0;">
        <div id="metadataDashboard" class="row" ng-init="init(); published=null; observation=null">
            <ng-include src="'views/data/dataset.html'"></ng-include>
        </div>
    </div>
</div>

<div id="backtotop"
     scroll-to=""
     class="backtotop"
     ng-if="!hideScroll">
    <span class="glyphicon glyphicon-chevron-up"></span>
</div>

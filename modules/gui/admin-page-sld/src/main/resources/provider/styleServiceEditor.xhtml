<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:mf="http://mapfaces.org/taglib">

    <h:commandButton action="#{bean.createSource}" value="#{bean.i18n['addSource']}" />
    <br/>
    <br/>
    <h:messages errorClass="errorMessage" />

    <div class="rounded">
        <mf:Outline id="storePreview" rootVisible="false" value="#{bean.instanceModel}" var="node" width="100%"
                    rowStyler="#{bean.instanceRowStyler}">

            <mf:DataTableColumn>
               <h:commandLink action="#{node.select}">
                    <h:outputText value="#{node.userObject.id}"/>
                </h:commandLink>
            </mf:DataTableColumn>

            <mf:DataTableColumn width="24px">
                 <h:commandLink action="#{node.config}">
                    <img src="#{facesContext.externalContext.requestContextPath}/provider.edit.png.mfRes" style="border:none;"/>
                </h:commandLink>
            </mf:DataTableColumn>
            
            <mf:DataTableColumn width="24px">
                <a4j:commandLink action="#{node.reload}" reRender="storePreview">
                    <img src="#{facesContext.externalContext.requestContextPath}/provider.reload.png.mfRes" style="border:none;"/>
                </a4j:commandLink>
            </mf:DataTableColumn>

        </mf:Outline>
    </div>
    
    <mf:Div rendered="#{bean.configuredInstance != null}">
        <h:commandButton action="#{bean.createNewStyle}" value="#{bean.i18n['newstyle']}" />
    </mf:Div>
    
    
    <mf:Div styleClass="rounded" rendered="#{bean.configuredInstance != null}">
        <mf:Outline id="layerPreview" rootVisible="false" value="#{bean.layerModel}" var="node" width="100%"
                    rowStyler="#{mf:constant('org.constellation.bean.HighLightRowStyler.INSTANCE')}">

            <mf:DataTableColumn>
                <h:outputText value="#{node.userObject}"/>
            </mf:DataTableColumn>
            
            <mf:DataTableColumn width="24px">
                <h:commandLink action="#{node.config}">
                    <img src="#{facesContext.externalContext.requestContextPath}/provider.edit.png.mfRes" style="border:none;"/>
                </h:commandLink>
            </mf:DataTableColumn>
            
        </mf:Outline>
    </mf:Div>
    

</ui:composition>


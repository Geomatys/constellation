<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>
  <HEAD>
    <TITLE>Installation des utilitaires de ligne de commandes</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </HEAD>
  <BODY>
    <h1>Installation des utilitaires de ligne de commandes</h1>

    <h2>Téléchargement des scripts</h2>
    <p>Placez-vous (à l'aide de la commande "<code>cd</code>") dans le répertoire qui devra
    contenir les scripts, puis exécutez la commande ci-dessous. Notez qu'il n'est pas nécessaire
    d'avoir fait un "<code>svn checkout</code>" au préalable; les fichiers seront récupérés
    directement à partir d'internet.</p>

    <blockquote><pre>svn export https://seagis.svn.sourceforge.net/svnroot/seagis/trunk/postgrid/src/main/shell</pre></blockquote>

    <p>Cette commande créera un répertoire <code>shell</code> que vous pourrez renommer et déplacer
    à votre guise. Ce répertoire devrait contenir les 4 sous-répertoires suivants:</p>

    <blockquote>
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><code><b>bin</b></code></td>
          <td>&nbsp;-&nbsp;</td>
          <td>contient les exécutables</td>
        </tr><tr>
          <td><code><b>etc</b></code></td>
          <td>&nbsp;-&nbsp;</td>
          <td>contient des paramètres configurables</td>
        </tr><tr>
          <td><code><b>jar</b></code></td>
          <td>&nbsp;-&nbsp;</td>
          <td>devra contenir tous les fichiers JARs</td>
        </tr><tr>
          <td><code><b>log</b></code>
          <td>&nbsp;-&nbsp;</td>
          </td><td>contiendra la sortie du journal</td>
        </tr>
      </table>
    </blockquote>
    
    <h2>Ajout des fichiers JARs</h2>
    <p>Le répertoire "<code>jar</code>" sera initialement vide. Vous devez exécuter
    <b>une seule</b> des actions suivantes, à votre choix:</p>

    <ul>
      <li><h3>Lien vers GeoServer</h3>
      <p>Remplacer ce répertoire par un lien symbolique vers le répertoire qui contient les JARs de
      GeoServer. Cette approche a l'avantage de garantir que le code exécuté par les scripts est le
      même que celui exécuté par GeoServer. Il a l'inconvénient que chaque mise-à-jour de Geoserver
      peut briser les scripts, et certains JARs inutilisés par GeoServer peuvent manquer.</p>
      
      <p>Pour appliquer cette approche, exécutez les commandes ci-dessous en remplaçant le chemin
      "<code>/home/tomcat/&hellip;</code>" par celui qui est propre à votre machine.</p>

      <blockquote><pre>rmdir jar
ln -s /home/tomcat/webapps/geoserver/WEB-INF/lib jar</pre></blockquote></li>

      <li><h3>Copier les JARs</h3>
      <p>Copier dans ce répertoire les JARs de GeoServer ou ceux produits par Maven. Par exemple
      après l'exécution de "<code>mvn install</code>" à partir de la racine du projet, le répertoire
      "<code>target/binaries</code>" devrait contenir tous les JARs nécessaires. Ces JARs peuvent
      être copiés intégralement vers le répertoire "<code>jar</code>" même si d'autres JARs existaient
      au préalable, en écrasant les anciens fichiers au besoin. Il est relativement sécuritaire de
      procéder de la sorte parce que le nom de chaque fichier JAR contient un numéro de version.
      Plusieurs versions du même JAR peuvent ainsi se côtoyer dans le même répertoire sans créer
      de conflit, et chaque script est conçu de manière à utiliser un JAR d'une version spécifique
      en ignorant les autres (cela fonctionne aussi pour les dépendances transitives grâce au
      "<code>class-path</code>" déclaré dans l'entrée "<code>META-INF/MANIFEST.MF</code>" de chaque
      fichier JAR).</p></li>
    </ul>
  </BODY>
</HTML>
